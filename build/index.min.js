document.addEventListener("DOMContentLoaded",(function(e){document.querySelector('form input[type="file"]').addEventListener("change",(function(e){document.querySelector("form p").innerHTML=this.files[0].name}));const t=document.querySelector("form");function o(e){const t=document.getElementById("target");t.innerHTML="";const o=document.createElement("span"),n="https://api.opencagedata.com/geocode/v1/json?key=3e48b1dea774438997c0035eb0122606&q="+encodeURIComponent(e)+"&pretty=1&no_annotations=1",a=new XMLHttpRequest;a.open("GET",n,!0),a.onload=function(){if(200==a.status){const e=JSON.parse(a.responseText);o.appendChild(document.createTextNode(e.results[0].formatted)),t.append(o)}else if(a.status<=500){console.log("Incapaz de executar o geocode! Código da resposta: "+a.status);const e=JSON.parse(a.responseText);console.log(e.status.message),o.appendChild(document.createTextNode("Incapaz de executar o geocode! Código da resposta:"+e.status.message)),t.append(o)}else console.log("Erro de servidor"),o.appendChild(document.createTextNode("Erro de servidor")),t.append(o)},a.onerror=function(){console.log("Incapaz de conectar ao servidor"),o.appendChild(document.createTextNode("Incapaz de conectar ao servidor")),t.append(o)},a.send()}t.addEventListener("submit",(function(e){e.preventDefault(),function(){var e=document.getElementById("sendfile");if(/^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/.test(e.value.toLowerCase()))if("undefined"!=typeof FileReader){var t=new FileReader;t.onload=function(e){for(var t=e.target.result.split("\n"),n=0;n<t.length;n++)""!==t[n]&&0!=n&&(console.log(t[n]),o(t[n]))},t.readAsText(e.files[0])}else alert("Este browser não suporta HTML5.");else alert("Favor enviar um arquivo CSV válido.")}(),t.reset(),document.querySelector("form p").innerHTML="Arraste seu arquivo ou clique nessa área."}))}));